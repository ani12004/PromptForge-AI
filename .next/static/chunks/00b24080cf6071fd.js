(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27882,e=>{"use strict";var s=e.i(43476),a=e.i(27085),r=e.i(71645);function t(){let{user:e,isLoaded:t,isSignedIn:d}=(0,a.useUser)(),[l,i]=(0,r.useState)(null),[n,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null);return((0,r.useEffect)(()=>{t&&e&&(async()=>{x(!0),x(!1)})()},[t,e]),t)?d?(0,s.jsxs)("div",{className:"min-h-screen bg-black text-white p-12 font-mono",children:[(0,s.jsx)("h1",{className:"text-2xl text-red-500 font-bold mb-8",children:"Gamification Debugger"}),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"border border-white/20 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-brand-purple",children:"1. Clerk Session Info"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"User ID:"})," ",(0,s.jsx)("span",{className:"text-green-400",children:e.id})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Email:"})," ",e.primaryEmailAddress?.emailAddress]})]}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-900 rounded text-sm text-yellow-400",children:['⚠️ Please check your Supabase "user_badges" table. ',(0,s.jsx)("br",{}),"Does the ",(0,s.jsx)("code",{children:"user_id"})," column match EXACTLY with ",(0,s.jsx)("span",{className:"text-green-400",children:e.id}),"?"]})]}),(0,s.jsxs)("div",{className:"border border-white/20 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-400",children:"2. SQL Query Generator"}),(0,s.jsx)("p",{className:"mb-4 text-sm text-gray-400",children:"Run this SQL EXACTLY to fix the ID mismatch manually if the email lookup failed:"}),(0,s.jsx)("div",{className:"bg-[#111] p-4 rounded border border-white/10 overflow-x-auto",children:(0,s.jsx)("pre",{className:"text-sm text-gray-300",children:`INSERT INTO user_badges (user_id, badge_id)
SELECT '${e.id}', id 
FROM badges 
WHERE name = 'Legend of PromptForge'
ON CONFLICT (user_id, badge_id) DO UPDATE SET earned_at = NOW();`})})]})]})]}):(0,s.jsx)("div",{children:"Not signed in"}):(0,s.jsx)("div",{children:"Loading Clerk..."})}e.s(["default",()=>t])}]);