(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,r)=>{},98547,(e,t,r)=>{var s=e.i(47167);e.r(16015);var i=e.r(71645),n=i&&"object"==typeof i&&"default"in i?i:{default:i},a=void 0!==s.default&&s.default.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,s=void 0===r?"stylesheet":r,i=t.optimizeForSpeed,n=void 0===i?a:i;c(l(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",c("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="u">typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"u">typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(l(e),"`insertRule` accepts only strings"),"u"<typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var s=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,s))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"u"<typeof window){var r="u">typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(s){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var s=this._tags[e];c(s,"old rule at index `"+e+"` not found"),s.textContent=t}return e},r.deleteRule=function(e){if("u"<typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"u">typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"u"<typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(l(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return r?i.insertBefore(s,r):i.appendChild(s),s},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var r=String(t),s=e+r;return u[s]||(u[s]="jsx-"+d(e+"-"+r)),u[s]}function p(e,t){"u"<typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var x=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,s=void 0===r?null:r,i=t.optimizeForSpeed,n=void 0!==i&&i;this._sheet=s||new o({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),s&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"u">typeof window&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),s=r.styleId,i=r.rules;if(s in this._instancesCounts){this._instancesCounts[s]+=1;return}var n=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[s]=n,this._instancesCounts[s]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var s=this._fromServer&&this._fromServer[r];s?(s.parentNode.removeChild(s),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],s=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:s}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,s=e.id;if(r){var i=h(s,r);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return p(i,e)}):[p(i,t)]}}return{styleId:h(s),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),m=i.createContext(null);function f(){return new x}function b(){return i.useContext(m)}m.displayName="StyleSheetContext";var g=n.default.useInsertionEffect||n.default.useLayoutEffect,v="u">typeof window?f():void 0;function y(e){var t=v||b();return t&&("u"<typeof window?t.add(e):g(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,s=i.useContext(m),a=i.useState(function(){return s||t||f()})[0];return n.default.createElement(m.Provider,{value:a},r)},r.createStyleRegistry=f,r.style=y,r.useStyleRegistry=b},37902,(e,t,r)=>{t.exports=e.r(98547).style},15340,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(95187);let i=(0,s.createServerReference)("70f8d5e6edf64765b50f288ba4f3fe2e1178371643",s.callServer,void 0,s.findSourceMapURL,"refinePrompt");var n=e.i(80809),a=e.i(83086),l=e.i(39312),o=e.i(52008),c=e.i(20278),d=e.i(98919),u=e.i(72520),h=e.i(84765),p=e.i(75254);let x=(0,p.default)("fingerprint-pattern",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);var m=e.i(21218),f=e.i(46932),b=e.i(88653),g=e.i(37902),v=e.i(47163);let y=r.forwardRef(({className:e,label:r,valueDisplay:s,...i},n)=>(0,t.jsxs)("div",{className:"w-full space-y-2",children:[(r||s)&&(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs font-medium text-gray-400",children:[r&&(0,t.jsx)("span",{children:r}),s&&(0,t.jsx)("span",{className:"font-mono text-brand-purple",children:s})]}),(0,t.jsxs)("div",{className:"jsx-eba1bccd8297c25b relative flex items-center w-full h-4 group",children:[(0,t.jsx)("div",{className:"jsx-eba1bccd8297c25b absolute w-full h-1.5 bg-white/10 rounded-full overflow-hidden",children:(0,t.jsx)("div",{style:{width:`${(Number(i.value)-Number(i.min||0))/(Number(i.max||100)-Number(i.min||0))*100}%`},className:"jsx-eba1bccd8297c25b h-full bg-brand-purple rounded-full transition-all duration-100"})}),(0,t.jsx)("input",{type:"range",ref:n,...i,className:"jsx-eba1bccd8297c25b "+(i&&null!=i.className&&i.className||(0,v.cn)("absolute inset-0 w-full h-full opacity-0 cursor-pointer",e)||"")}),(0,t.jsx)(g.default,{id:"eba1bccd8297c25b",children:"input[type=range].jsx-eba1bccd8297c25b::-webkit-slider-thumb{-webkit-appearance:none;cursor:pointer;background:#fff;border:2px solid #7c3aed;border-radius:50%;width:16px;height:16px;margin-top:-6px;box-shadow:0 0 10px #7c3aed80}input[type=range].jsx-eba1bccd8297c25b::-moz-range-thumb{cursor:pointer;background:#fff;border:2px solid #7c3aed;border-radius:50%;width:16px;height:16px;box-shadow:0 0 10px #7c3aed80}"})]})]}));y.displayName="Slider";let w=(0,p.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function j({options:e,onChange:r}){let s=(t,s)=>{r({...e,[t]:s})};return(0,t.jsxs)(f.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-[#0F0F0F] border-t border-white/5 p-6 rounded-b-xl space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Granular Configuration"}),(0,t.jsxs)("div",{className:"group/tooltip relative",children:[(0,t.jsx)(w,{className:"h-3 w-3 text-gray-500 cursor-help"}),(0,t.jsx)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-3 bg-black border border-white/10 rounded-lg text-xs text-gray-400 opacity-0 group-hover/tooltip:opacity-100 transition-opacity pointer-events-none z-50",children:"Adjusting these values controls the creativity (Temperature), diversity (Top-P), and probability filtering (Top-K) of the AI model."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(y,{label:"Temperature",value:e.temperature,min:0,max:1,step:.1,valueDisplay:e.temperature,onChange:e=>s("temperature",parseFloat(e.target.value))}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"Controls randomness. Higher values (0.8+) make output more random/creative. Lower values (0.2) make it more focused/deterministic."})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(y,{label:"Top P",value:e.topP,min:0,max:1,step:.05,valueDisplay:e.topP,onChange:e=>s("topP",parseFloat(e.target.value))}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"Nucleus sampling. Limits user pool to top P probability mass. 0.95 is standard for balanced generation."})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(y,{label:"Top K",value:e.topK,min:1,max:100,step:1,valueDisplay:e.topK,onChange:e=>s("topK",parseInt(e.target.value))}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 leading-tight",children:"Limits the next token selection to the top K most likely tokens. Lower values reduce risk of hallucinations."})]})]})]})}let N=[{label:"Short",desc:"Concise",icon:l.Zap},{label:"Medium",desc:"Balanced",icon:o.Layers},{label:"Detailed",desc:"Robust",icon:c.Target},{label:"Granular",desc:"Expert",icon:d.Shield}];function S({prompt:e,setPrompt:s,detailLevel:i,setDetailLevel:n,onGenerate:l,isGenerating:o,granularOptions:c,setGranularOptions:d,onAudit:p,isAuditing:g}){let v=(0,r.useRef)(null),[y,w]=(0,r.useState)(!1),[S,_]=(0,r.useState)(!1),k=e.toLowerCase(),A=k.length>10&&(k.includes("create")||k.includes("write")||k.includes("generate")||k.includes("act as")),C=e.length>50&&(k.includes("for")||k.includes("because")||k.includes("context")||k.includes("using")),F=k.includes("no ")||k.includes("without")||k.includes("only")||k.includes("must")||k.includes("format"),R=0;return A&&(R+=30),C&&(R+=40),F&&(R+=30),e.length<10&&(R=0),(0,t.jsx)("div",{className:"flex flex-col h-full relative transition-all duration-500",children:(0,t.jsxs)("div",{className:`relative flex-1 rounded-2xl bg-[#0F0F0F] border transition-all duration-300 group overflow-hidden flex flex-col ${y?"border-brand-purple/40 shadow-xl shadow-brand-purple/5":"border-white/5 hover:border-white/10"}`,children:[(0,t.jsxs)("div",{className:"h-12 border-b border-white/5 flex items-center justify-between px-4 bg-white/[0.02]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex gap-1.5",children:[(0,t.jsx)("span",{className:`w-2 h-2 rounded-full transition-colors ${A?"bg-brand-purple shadow-[0_0_8px_rgba(168,85,247,0.5)]":"bg-white/10"}`,title:"Goal Detected"}),(0,t.jsx)("span",{className:`w-2 h-2 rounded-full transition-colors ${C?"bg-blue-400 shadow-[0_0_8px_rgba(96,165,250,0.5)]":"bg-white/10"}`,title:"Context Detected"}),(0,t.jsx)("span",{className:`w-2 h-2 rounded-full transition-colors ${F?"bg-orange-400 shadow-[0_0_8px_rgba(251,146,60,0.5)]":"bg-white/10"}`,title:"Constraints Detected"})]}),(0,t.jsxs)("span",{className:"text-[10px] uppercase tracking-widest text-gray-600 font-mono",children:[e.length," chars"]})]}),(0,t.jsxs)("button",{onClick:()=>_(!S),className:`text-[10px] font-mono flex items-center gap-1.5 transition-colors px-2 py-1 rounded hover:bg-white/5 ${S?"text-brand-purple":"text-gray-500 hover:text-white"}`,children:[(0,t.jsx)(h.Settings2,{className:"w-3 h-3"}),"ADVANCED"]})]}),(0,t.jsx)(b.AnimatePresence,{children:S&&(0,t.jsx)(f.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"border-b border-white/5 bg-black/20",children:(0,t.jsx)(j,{options:c,onChange:d})})}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[!e&&(0,t.jsxs)("div",{className:"absolute inset-0 p-6 pointer-events-none opacity-20 flex flex-col justify-center items-center text-center gap-4",children:[(0,t.jsx)(x,{className:"w-12 h-12 text-gray-600"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"Start typing your raw idea..."}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"We'll help you structure it."})]})]}),(0,t.jsx)("textarea",{ref:v,value:e,onChange:e=>s(e.target.value),onFocus:()=>w(!0),onBlur:()=>w(!1),onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&l()},className:"w-full h-full bg-transparent p-6 text-base md:text-lg font-mono text-white/90 focus:outline-none resize-none relative z-10 placeholder:text-transparent selection:bg-brand-purple/30",spellCheck:!1})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-white/5 bg-white/[0.02] flex flex-col xl:flex-row gap-4 xl:items-center justify-between",children:[(0,t.jsx)("div",{className:"flex bg-black/40 p-1 rounded-lg border border-white/5 self-start xl:self-auto",children:N.map(e=>{let r=i===e.label,s=e.icon;return(0,t.jsxs)("button",{onClick:()=>n(e.label),className:`relative px-3 py-1.5 rounded-md text-xs font-medium transition-all duration-300 flex items-center gap-2 ${r?"bg-white/10 text-white shadow-sm":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,title:e.desc,children:[(0,t.jsx)(s,{className:`w-3 h-3 ${r?"text-brand-purple":""}`}),(0,t.jsx)("span",{children:e.label})]},e.label)})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 w-full xl:w-auto",children:[(0,t.jsxs)("button",{onClick:p,disabled:g||!e.trim(),className:"px-4 py-2 rounded-lg border border-white/10 text-xs font-bold text-gray-400 hover:text-white hover:bg-white/5 transition-colors disabled:opacity-50 flex items-center gap-2",children:[g?(0,t.jsx)(m.Activity,{className:"w-3 h-3 animate-spin"}):(0,t.jsx)(m.Activity,{className:"w-3 h-3"}),g?"SCANNING...":"AUDIT"]}),(0,t.jsx)("button",{onClick:l,disabled:o||!e.trim(),className:"group relative flex-1 xl:flex-none flex items-center gap-2 bg-brand-purple text-white px-6 py-2 rounded-lg font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-purple/90 transition-all active:scale-95 shadow-[0_0_15px_rgba(124,58,237,0.25)] justify-center min-w-[140px]",children:(0,t.jsx)("span",{className:"relative z-10 flex items-center gap-2",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Sparkles,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"FORGING..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"ENHANCE"}),(0,t.jsx)(u.ArrowRight,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})})]})]})]})})}var _=e.i(74886),k=e.i(43531),A=e.i(55716),C=e.i(68054),F=e.i(417);let R=(0,p.default)("thumbs-down",[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]]),z=(0,s.createServerReference)("70f670a89769e81bb91fba466b62a151fb9cde1b32",s.callServer,void 0,s.findSourceMapURL,"submitFeedback");function T({versions:e,isGenerating:s}){let[i,n]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),o=i?e.find(e=>e.id===i):e[0];return o||s?(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[e.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:e.map((r,s)=>(0,t.jsxs)("button",{onClick:()=>n(r.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-full border text-xs font-mono transition-all whitespace-nowrap ${o?.id===r.id?"bg-white/10 border-white/20 text-white":"border-transparent text-gray-600 hover:text-gray-400 hover:bg-white/5"}`,children:[(0,t.jsx)(A.GitBranch,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:["v",e.length-s,".0"]}),0===s&&(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-purple animate-pulse"})]},r.id))}),(0,t.jsxs)("div",{className:"flex-1 relative rounded-xl border border-white/10 bg-[#0A0A0A] overflow-hidden group",children:[(0,t.jsx)("div",{className:"absolute top-0 inset-x-0 h-8 bg-gradient-to-b from-[#0A0A0A] to-transparent z-10"}),(0,t.jsx)("div",{className:"h-full overflow-auto p-6 font-mono text-sm leading-relaxed text-gray-300",children:(0,t.jsx)(b.AnimatePresence,{mode:"wait",children:(0,t.jsx)(f.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"whitespace-pre-wrap",children:o?.content},o?.id||"empty")})}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex gap-2 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(P,{versionId:o?.versionId,promptVersionId:o?.versionId}),(0,t.jsx)("button",{onClick:()=>{o&&(navigator.clipboard.writeText(o.content),l(!0),setTimeout(()=>l(!1),2e3))},className:"p-2 rounded-lg bg-[#1A1A1A] border border-white/10 hover:bg-white/10 text-gray-400 hover:text-white transition-colors",title:"Copy to Clipboard",children:a?(0,t.jsx)(k.Check,{className:"w-4 h-4 text-green-500"}):(0,t.jsx)(_.Copy,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"absolute bottom-0 inset-x-0 h-12 bg-gradient-to-t from-[#0A0A0A] to-transparent pointer-events-none"})]}),o&&(0,t.jsx)("div",{className:"mt-4 flex justify-between items-center text-[10px] font-mono text-gray-600 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("span",{children:["Depth: ",o.detailLevel]}),(0,t.jsxs)("span",{children:[(o.content.length/5).toFixed(0)," Tokens"]})]})})]}):(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-600",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-[#0F0F0F] border border-white/5 flex items-center justify-center mb-4",children:(0,t.jsx)(C.Terminal,{className:"w-6 h-6 opacity-20"})}),(0,t.jsx)("p",{className:"text-xs font-mono uppercase tracking-widest text-gray-600",children:"System Ready"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Awaiting input stream..."})]})}function P({versionId:e,promptVersionId:s}){let[i,n]=(0,r.useState)("idle"),a=e||s;if(!a)return null;let l=async(e,t)=>{if("idle"===i){n(t);try{await z(a,e)}catch(e){console.error(e),n("idle")}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>l(1,"up"),disabled:"idle"!==i,className:`p-2 rounded-lg border transition-colors ${"up"===i?"bg-green-500/20 border-green-500/50 text-green-400":"bg-[#1A1A1A] border-white/10 hover:bg-white/10 text-gray-400 hover:text-white"}`,title:"Helpful",children:(0,t.jsx)(F.ThumbsUp,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>l(-1,"down"),disabled:"idle"!==i,className:`p-2 rounded-lg border transition-colors ${"down"===i?"bg-red-500/20 border-red-500/50 text-red-400":"bg-[#1A1A1A] border-white/10 hover:bg-white/10 text-gray-400 hover:text-white"}`,title:"Not Helpful",children:(0,t.jsx)(R,{className:"w-4 h-4"})})]})}function E(){return(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center relative overflow-hidden bg-[#0A0A0A]",children:[(0,t.jsxs)("div",{className:"relative mb-8",children:[(0,t.jsx)(f.motion.div,{className:"absolute inset-0 bg-brand-purple/20 blur-xl rounded-full",animate:{scale:[1,1.5,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0}}),(0,t.jsx)("div",{className:"w-16 h-16 bg-[#0F0F0F] border border-white/10 rounded-2xl flex items-center justify-center relative z-10 shadow-2xl",children:(0,t.jsx)(a.Sparkles,{className:"w-6 h-6 text-brand-purple animate-pulse"})})]}),(0,t.jsxs)("div",{className:"space-y-4 w-full max-w-xs relative z-10",children:[(0,t.jsx)(I,{label:"Analyzing Intent & Goal...",delay:0}),(0,t.jsx)(I,{label:"Restructuring Logic Flow...",delay:.8}),(0,t.jsx)(I,{label:"Refining Constraints & Tone...",delay:1.6}),(0,t.jsx)(I,{label:"Finalizing Engineered Output...",delay:2.4})]}),(0,t.jsxs)("div",{className:"absolute inset-0 pointer-events-none opacity-5",children:[(0,t.jsx)("div",{className:"absolute top-0 left-10 w-[1px] h-full bg-gradient-to-b from-transparent via-white to-transparent"}),(0,t.jsx)("div",{className:"absolute top-0 right-10 w-[1px] h-full bg-gradient-to-b from-transparent via-white to-transparent"})]})]})}function I({label:e,delay:r}){return(0,t.jsxs)(f.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:r,duration:.5},className:"flex items-center gap-3",children:[(0,t.jsx)(f.motion.div,{className:"w-4 h-4 rounded-full border border-white/20 flex items-center justify-center",initial:{borderColor:"rgba(255,255,255,0.2)"},animate:{borderColor:["rgba(255,255,255,0.2)","#7C3AED","#10B981"],backgroundColor:["transparent","rgba(124, 58, 237, 0.2)","rgba(16, 185, 129, 0.2)"]},transition:{delay:r,duration:1.5,times:[0,.3,1]},children:(0,t.jsx)("div",{className:"w-1 h-1 bg-current rounded-full"})}),(0,t.jsx)("span",{className:"text-xs font-mono text-gray-400 uppercase tracking-wider",children:e})]})}var M=e.i(37727),L=e.i(64030);let D=(0,p.default)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]),O=(0,p.default)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]);var U=e.i(74080);function G({versions:e,onClose:s}){let[i,n]=(0,r.useState)([null,null]),[a,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1);r.default.useEffect(()=>{u(!0)},[]);let h=async()=>{if(!i[0]||!i[1])return;l(!0),await new Promise(e=>setTimeout(e,2e3));let t=e.find(e=>e.id===i[0]),r=e.find(e=>e.id===i[1]);t&&r&&(c({winnerId:t.content.length*("Granular"===t.detailLevel?1.5:1)>r.content.length*("Granular"===r.detailLevel?1.5:1)?t.id:r.id,insights:["Higher structural complexity detected.","More explicit constraint definitions.","Better handling of edge cases modeled."]}),l(!1))};return d?(0,U.createPortal)((0,t.jsx)(b.AnimatePresence,{children:(0,t.jsxs)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9999] flex flex-col pt-16 lg:pt-0",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:s}),(0,t.jsxs)("div",{className:"relative flex-1 flex flex-col bg-[#0F0F0F] overflow-hidden shadow-2xl animate-in slide-in-from-bottom-5 duration-300",children:[(0,t.jsxs)("div",{className:"h-16 border-b border-white/5 flex items-center justify-between px-6 bg-[#0A0A0A] relative z-10 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-brand-purple/10 flex items-center justify-center border border-brand-purple/20",children:(0,t.jsx)(O,{className:"h-5 w-5 text-brand-purple"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-white leading-none",children:"A/B Laboratory"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 font-mono",children:"Compare generative performance & structural integrity."})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{disabled:!i[0]||!i[1]||a,onClick:h,className:"bg-brand-purple hover:bg-brand-purple/90 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2 rounded-lg font-bold text-sm flex items-center gap-2 transition-all shadow-[0_0_20px_rgba(168,85,247,0.2)]",children:a?(0,t.jsx)("span",{className:"animate-pulse",children:"ANALYZING..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L.Trophy,{className:"h-4 w-4"})," BEGIN ANALYSIS"]})}),(0,t.jsx)("div",{className:"h-8 w-px bg-white/10 mx-2"}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-gray-400 hover:text-white",children:(0,t.jsx)(M.X,{className:"h-5 w-5"})})]})]}),(0,t.jsx)("div",{className:"flex-1 flex overflow-hidden",children:[0,1].map(r=>{let s=i[r],a=e.find(e=>e.id===s),l=o?.winnerId===s&&!!o,d=o?.winnerId&&o.winnerId!==s;return(0,t.jsxs)("div",{className:(0,v.cn)("flex-1 flex flex-col relative transition-all duration-500",0===r?"border-r border-white/5":"",l?"bg-green-500/[0.02]":d?"bg-red-500/[0.01]":""),children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/5 flex items-center justify-between bg-white/[0.01]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)("div",{className:(0,v.cn)("w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border",0===r?"bg-blue-500/10 border-blue-500/20 text-blue-400":"bg-orange-500/10 border-orange-500/20 text-orange-400"),children:0===r?"A":"B"}),(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsxs)("select",{value:s||"",onChange:e=>{var t;let s;return t=e.target.value,void((s=[...i])[r]=t,n(s),c(null))},className:"w-full bg-[#1A1A1A] border border-white/10 text-white text-xs rounded-lg px-3 py-2 appearance-none focus:outline-none focus:border-white/20 font-mono",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"-- Select Iteration --"}),e.map(e=>(0,t.jsxs)("option",{value:e.id,children:[new Date(e.timestamp).toLocaleTimeString()," - ",e.detailLevel," (",e.content.length," chars)"]},e.id))]}),(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500",children:(0,t.jsx)("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M1 1L5 5L9 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),a&&(0,t.jsx)("button",{onClick:()=>{var e;return e=a.content,void navigator.clipboard.writeText(e)},className:"p-2 hover:bg-white/5 rounded-lg text-gray-500 hover:text-white transition-colors",title:"Copy Content",children:(0,t.jsx)(_.Copy,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex-1 relative overflow-hidden group",children:[a?(0,t.jsx)("div",{className:"absolute inset-0 overflow-y-auto p-8 custom-scrollbar",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap font-mono text-sm text-gray-300 leading-relaxed font-ligatures-none pb-32",children:a.content})}):(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-700 select-none",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-2xl border-2 border-dashed border-white/5 flex items-center justify-center mb-4 transition-colors group-hover:border-white/10",children:(0,t.jsx)(D,{className:"w-8 h-8 opacity-20"})}),(0,t.jsx)("p",{className:"text-sm font-mono opacity-50",children:"Select an iteration above to load"})]}),(0,t.jsx)(b.AnimatePresence,{children:l&&(0,t.jsx)(f.motion.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"absolute bottom-6 inset-x-6 p-5 rounded-xl bg-[#0F1E15] border border-green-500/20 shadow-2xl backdrop-blur-md z-20",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center shrink-0",children:(0,t.jsx)(L.Trophy,{className:"w-5 h-5 text-green-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-green-400 font-bold text-sm uppercase tracking-wider mb-2",children:"Dominant Variation"}),(0,t.jsx)("ul",{className:"space-y-1",children:o?.insights.map((e,r)=>(0,t.jsxs)("li",{className:"text-xs text-green-200/60 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-1 h-1 rounded-full bg-green-500"}),e]},r))})]})]})})})]})]},r)})})]})]})}),document.body):null}var B=e.i(22016);function $({isOpen:e,onClose:r}){return(0,t.jsx)(b.AnimatePresence,{children:e&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)(f.motion.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},onClick:e=>e.stopPropagation(),className:"bg-[#0A0A0A] border border-white/10 rounded-2xl shadow-2xl w-full max-w-md relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-brand-purple/50 to-transparent"}),(0,t.jsx)("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-brand-purple/20 blur-3xl rounded-full"}),(0,t.jsxs)("div",{className:"p-6 relative z-10",children:[(0,t.jsx)("button",{onClick:r,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-white/5",children:(0,t.jsx)(M.X,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"mb-6 flex justify-center",children:(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-brand-purple/10 flex items-center justify-center border border-brand-purple/20 shadow-glow-sm",children:(0,t.jsx)(l.Zap,{className:"w-8 h-8 text-brand-purple"})})}),(0,t.jsxs)("div",{className:"text-center space-y-3 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white tracking-tight",children:"Unlock Unlimited Potential"}),(0,t.jsxs)("p",{className:"text-gray-400 text-sm leading-relaxed",children:["You've hit the monthly limit on the Free plan. ",(0,t.jsx)("br",{}),"Upgrade to Pro for unlimited prompts, faster generations, and exclusive models."]})]}),(0,t.jsx)("div",{className:"space-y-3 mb-8",children:["Unlimited Prompt Generations","Access to Granular & Expert Modes","Priority Access during high traffic"].map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-300",children:[(0,t.jsx)(a.Sparkles,{className:"w-4 h-4 text-brand-purple/70"}),(0,t.jsx)("span",{children:e})]},r))}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(B.default,{href:"/pricing",className:"block w-full py-3 px-4 bg-brand-purple hover:bg-brand-purple/90 text-white text-center font-medium rounded-lg transition-all shadow-glow-sm hover:shadow-glow-md",children:"Upgrade to Pro"}),(0,t.jsx)("button",{onClick:r,className:"block w-full py-3 px-4 bg-transparent hover:bg-white/5 text-gray-400 hover:text-white text-center font-medium rounded-lg transition-colors text-sm",children:"Maybe Later"})]})]})]})})})})}var K=e.i(73549);let q=(0,s.createServerReference)("40fb767cfc3e346384f9d30f3caef9b102e577f55b",s.callServer,void 0,s.findSourceMapURL,"auditPrompt");var H=e.i(69638),V=e.i(78894);let W=(0,p.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function X({isOpen:e,onClose:r,result:s}){if(!e||!s)return null;let i=s.score>=80?"text-green-400":s.score>=50?"text-yellow-400":"text-red-400",n=s.score>=80?"stroke-green-500":s.score>=50?"stroke-yellow-500":"stroke-red-500";return(0,t.jsx)(b.AnimatePresence,{children:e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50"}),(0,t.jsx)(f.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 pointer-events-none z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"pointer-events-auto bg-[#0F0F0F] border border-white/10 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-white/5 flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Prompt Audit Report"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"AI-powered critique of your current input."})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,t.jsx)(M.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[(0,t.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,t.jsxs)("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,t.jsx)("circle",{cx:"64",cy:"64",r:"60",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-white/5"}),(0,t.jsx)("circle",{cx:"64",cy:"64",r:"60",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:377,strokeDashoffset:377-377*s.score/100,className:`transition-all duration-1000 ease-out ${n}`,strokeLinecap:"round"})]}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,t.jsx)("span",{className:`text-4xl font-bold ${i}`,children:s.score}),(0,t.jsx)("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"Quality"})]})]})}),s.strengths.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2 text-sm font-bold text-green-400 uppercase tracking-wider mb-3",children:[(0,t.jsx)(H.CheckCircle,{className:"w-4 h-4"})," Strong Points"]}),(0,t.jsx)("ul",{className:"space-y-2",children:s.strengths.map((e,r)=>(0,t.jsx)("li",{className:"text-sm text-gray-300 pl-6 relative before:absolute before:left-2 before:top-2 before:w-1.5 before:h-1.5 before:rounded-full before:bg-green-500/50",children:e},r))})]}),s.weaknesses.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2 text-sm font-bold text-red-400 uppercase tracking-wider mb-3",children:[(0,t.jsx)(V.AlertTriangle,{className:"w-4 h-4"})," Areas to Improve"]}),(0,t.jsx)("ul",{className:"space-y-2",children:s.weaknesses.map((e,r)=>(0,t.jsx)("li",{className:"text-sm text-gray-300 pl-6 relative before:absolute before:left-2 before:top-2 before:w-1.5 before:h-1.5 before:rounded-full before:bg-red-500/50",children:e},r))})]}),s.suggestions.length>0&&(0,t.jsxs)("div",{className:"bg-blue-500/5 border border-blue-500/10 rounded-xl p-4",children:[(0,t.jsxs)("h3",{className:"flex items-center gap-2 text-sm font-bold text-blue-400 uppercase tracking-wider mb-3",children:[(0,t.jsx)(W,{className:"w-4 h-4"})," Actionable Advice"]}),(0,t.jsx)("ul",{className:"space-y-2",children:s.suggestions.map((e,r)=>(0,t.jsxs)("li",{className:"text-sm text-gray-300 flex gap-2",children:[(0,t.jsx)("span",{className:"text-blue-500 font-bold",children:"→"})," ",e]},r))})]})]})]})})]})})}function Y(){let[e,s]=(0,r.useState)(""),[a,l]=(0,r.useState)("Medium"),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)([]),[h,p]=(0,r.useState)({temperature:.7,topP:.95,topK:40}),[x,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{(0,K.getUserSubscription)().then(w)},[]);let[j,N]=(0,r.useState)({msg:"",type:"success",visible:!1}),[_,k]=(0,r.useState)(!1),[A,C]=(0,r.useState)(null),[F,R]=(0,r.useState)(!1),z=(e,t="success")=>{N({msg:e,type:t,visible:!0})},P=async()=>{if(e.trim()&&!(e.length<10)){k(!0);try{let t=await q(e);t.success&&t.data?(C(t.data),R(!0)):z(t.error||"Audit failed","error")}catch(e){z("System Error during audit","error")}finally{k(!1)}}},I=async()=>{if(!e.trim())return;if(e.trim().length<10)return void z("Prompt too short: Please enter at least 10 characters.","error");if("u">typeof navigator&&!navigator.onLine)return void z("Network Error: You appear to be offline. Please check your connection.","error");c(!0);let t=Date.now(),r=new Promise((e,t)=>setTimeout(()=>t(Error("TIMEOUT_EXCEEDED")),45e3)),s=new Promise(e=>setTimeout(e,2500));try{let n=i(e,a,h),[l,o]=await Promise.all([s,Promise.race([n,r])]);if(o&&!o.success){let e=o.error||"Unknown Error",r=Date.now()-t,s="System Error: Unable to complete enhancement.";if(e.includes("Limit Reached")){v(!0),c(!1);return}s=e.includes("failed to fetch")||e.includes("Connection failed")?r<2e3?"Connection Error: Unable to reach the AI engine.":"The enhancement engine didn’t respond in time. Please try again.":e.includes("API Key")?"Configuration Error: System credentials missing.":e.includes("Model")||e.includes("Overloaded")?"Capacity Warning: The AI service is momentarily busy.":e,z(s,"error")}else if(o&&o.success&&o.content){let e={id:crypto.randomUUID(),content:o.content,timestamp:Date.now(),detailLevel:a,promptId:o.promptId,versionId:o.versionId};u(t=>[e,...t]),z("Enhancement complete. Logic optimized.")}else z("System Error: The AI engine returned an empty response.","error")}catch(t){console.error("Studio Generation Logic Error:",t);let e="Unexpected Error: The system encountered a state discrepancy.";"TIMEOUT_EXCEEDED"===t.message?e="Operation Timeout: The AI service is momentarily unavailable.":t.message?.includes("fetch")&&(e="Network Interruption: Connection to the server was lost."),z(e+" Your input is preserved.","error")}finally{c(!1)}};return(0,t.jsxs)("div",{className:"h-full flex flex-col lg:flex-row bg-transparent overflow-hidden text-gray-200 font-sans selection:bg-brand-purple/30 selection:text-white",children:[(0,t.jsx)(n.Toast,{message:j.msg,type:j.type,isVisible:j.visible,onClose:()=>N(e=>({...e,visible:!1}))}),(0,t.jsx)("div",{className:`flex-1 flex flex-col min-h-[50vh] lg:min-h-auto relative z-10 transition-all duration-500 ease-in-out ${o?"opacity-40 grayscale pointer-events-none":"opacity-100"}`,children:(0,t.jsxs)("div",{className:"flex-1 p-6 flex flex-col w-full h-full max-w-5xl mx-auto",children:[(0,t.jsxs)("header",{className:"mb-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-white tracking-tight",children:"Studio"}),"pro"===y&&(0,t.jsx)("span",{className:"px-2 py-0.5 rounded text-[9px] font-bold tracking-wider bg-brand-purple/20 text-brand-purple uppercase border border-brand-purple/20",children:"PRO"})]}),(0,t.jsxs)("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-white/10 text-xs font-medium text-gray-400 hover:text-white hover:bg-white/5 transition-colors",children:[(0,t.jsx)(L.Trophy,{className:"w-3 h-3"}),"Benchmark"]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0",children:(0,t.jsx)(S,{prompt:e,setPrompt:s,detailLevel:a,setDetailLevel:l,onGenerate:I,isGenerating:o,granularOptions:h,setGranularOptions:p,onAudit:P,isAuditing:_})})]})}),(0,t.jsxs)("div",{className:"flex-1 bg-black/20 backdrop-blur-sm flex flex-col relative z-0",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-brand-purple/10 via-transparent to-transparent opacity-60"}),(0,t.jsx)("div",{className:"flex-1 p-6 h-full overflow-hidden relative",children:(0,t.jsx)(b.AnimatePresence,{mode:"wait",children:o?(0,t.jsx)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-20",children:(0,t.jsx)(E,{})},"processing"):(0,t.jsx)(f.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full",children:(0,t.jsx)(T,{versions:d,isGenerating:o})},"results")})})]}),x&&(0,t.jsx)(G,{versions:d,onClose:()=>m(!1)}),(0,t.jsx)(X,{isOpen:F,onClose:()=>R(!1),result:A}),(0,t.jsx)($,{isOpen:g,onClose:()=>v(!1)})]})}e.s(["default",()=>Y],15340)}]);